<!DOCTYPE html>
<html>
<head>
  <title>Escape room matemático 2023</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>
<body class="text-center">
    <main class="w-100 m-auto">
        <br><br><br>
        <div class="form-floating">
            <input class="w-50 position-absolute top-50 start-50 translate-middle" type="text" style="display: none;" id="palabra" onkeyup="comprobarPalabra()" value="">
        </div>
        <button class="w-50 btn btn-lg btn-primary" id="boton" onclick="iniciarTemporizador()">Comezar</button>
    </main>
  <script type="text/javascript">
    let inicio = 0;
    document.getElementById('palabra').value = "";

    function iniciarTemporizador() {
      document.getElementById('boton').style.display = 'none';
      document.getElementById('palabra').style.display = 'block';
      inicio = Date.now();
    }

    function comprobarPalabra() {
      var letrasCodigo =['E','A','O','R','S','N','I','T','D','U','C','L','M','P','B','V'];
      var caracteresHex = ['7','3','E','F','4','C','D','9','6','5','B','2','0','1','8','A'];

      var palabra = document.getElementById('palabra').value;
      palabra = palabra.toUpperCase();
      // Tradución código->HEX
      var cadeaHex = [];
      for(let i=0; i<palabra.length; i++){
          for(let j =0; j<letrasCodigo.length; j++){
              if(palabra[i] === letrasCodigo[j]){
                cadeaHex.push(caracteresHex[j]);
              }
          }
      }
      cadeaHex = cadeaHex.join("");
      const numero = new Number("0x" + cadeaHex);
      if (numero % 131071 === 0) {
        let tempo = Date.now() - inicio;
        let segundos = Math.round(tempo/1000);
        window.location.href = 'test.html?t=' + segundos;
      }
    }
  </script>
</body>
</html>
